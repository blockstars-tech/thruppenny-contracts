const WETH = artifacts.require("WETH9_");
const Security = artifacts.require("SecurityContract");

const WETH_ADDR = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2";

const main = async () => {
  const [deployer, user1, user2] = await web3.eth.getAccounts();
  const signature =
    "0x0cf1c9937ebf9db555da96db23f3bb27e0b8723bc9b11a123d91d266658dbc346c0c396ddb95ea2b91d027361f78e3315a4e879d41ede3c89d6f984a2f2536181b";
  const params =
    "0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000b98aef45544acfd5a6cd2659b6e61ce0f003ae58000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000b98aef45544acfd5a6cd2659b6e61ce0f003ae58000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001";

  const weth = await WETH.at(WETH_ADDR);
  const security = await Security.at("0xa2F6E6029638cCb484A2ccb6414499aD3e825CaC");

  await weth.approve("0xD2547e4AA4f5a2b0a512BFd45C9E3360FeEa48Df", web3.utils.toWei("1000000"), {
    from: user1,
  });
  await weth.deposit({ from: user1, value: web3.utils.toWei("100") });

  await security.addFeeBalance({ from: user1, value: web3.utils.toWei("1") });

  const res = await security.executeBot(
    WETH_ADDR,
    web3.utils.toWei("1"),
    web3.utils.toWei("1.2"),
    3,
    user1,
    web3.utils.toWei("1000", "gwei"),
    false,
    signature,
    params
  );
  console.log(res);
  console.log(res.logs[0]);
};

main()
  .then(() => {
    console.log("Success!");
    process.exit(0);
  })
  .catch((err) => {
    console.log("err is ->", err);
    process.exit(1);
  });

export {};
